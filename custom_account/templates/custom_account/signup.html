<!DOCTYPE html>
<html lang="ko">
<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<!-- 반응형 웹을 위한 뷰포트 사용 -->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<title>계정 관리</title>

{% load static %}
<!-- 각 앱의 CSS. 앱의 CSS를 먼저 뒤지고 상위의 CSS를 찾는다. -->
<!-- jQuery JS 부트스트랩 JS를 쓰려면 필요해 -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
<script src="{% static 'popper.min.js' %}"></script>
<!-- Bootstrap CSS -->
<link rel="stylesheet" type="text/css" href="{% static 'bootstrap.min.css' %}">
<!-- Bootstrap JS -->
<script src="{% static 'bootstrap.min.js' %}"></script>

<body>


<div class="container my-3">
    <div class="row my-3">
        <div class="col-4">
            <h4>계정 생성</h4>
        </div>
        <div>
            <span>또는 <a href="{% url 'custom_account:login' %}">로그인 하세요.</a></span>
        </div>
    </div>

    <form method="post" class="post-form">
        {% csrf_token %}
        {% include "form_errors.html" %}
        <div class="form-group">
            <label for="username">id.</label>
            <input type="text" class="form-control" name="username" id="username"
                   value="{{ form.username.value|default_if_none:'' }}">
        </div>
        <div class="form-group">
            <label for="password1">비밀번호.</label>
            <input type="password" class="form-control" name="password1" id="password1"
                   value="{{ form.password1.value|default_if_none:'' }}">
        </div>
        <div class="form-group">
            <label for="password2">비밀번호 확인.</label>
            <input type="password" class="form-control" name="password2" id="password2"
                   value="{{ form.password2.value|default_if_none:'' }}">
        </div>
        <div class="form-group">
            <label for="nickname">별칭(별명).</label>
            <input type="text" class="form-control" name="nickname" id="nickname"
                   value="{{ form.nickname.value|default_if_none:'' }}">
        </div>
        <div class="form-group">
            <label for="email">이메일.</label> 이메일은 계정 보안의 핵심입니다.
            <input type="email" class="form-control" name="email" id="email"
                   value="{{ form.email.value|default_if_none:'' }}" placeholder="회원정보 변경 등에 사용되니 정확히!!">
        </div>
        <div class="form-group">
            <label for="email_confirm">이메일 확인.</label> 이메일은 계정 보안의 핵심입니다.
            <input type="email" class="form-control" name="email_confirm" id="email_confirm"
                   value="{{ form.email.value|default_if_none:'' }}" placeholder="위와 동일하게 입력하세요.">
        </div>

        <button type="submit" class="btn btn-primary" onclick="validate()">가입하기</button>
    </form>
</div>

function validate() {
    // 두 이메일이 일치하는지 확인.
    var email = document.getElementById('email').value;
    var confirmEmail = document.getElementById('email_confirm').value;

    if(email != confirmEmail) {
        alert("이메일 주소가 일치하지 않습니다. 다시 확인해 주세요.");
    } else {
        // 이메일이 일치하면 양식 제출
        document.querySelector('.post-form').submit();
    }
}

</body>