{% extends "school_report/section.html" %}

{% block content %}

{% if school %}
<h3>분배 가능 학년.</h3>
<form action="#" method="POST" id="myForm">
    {% csrf_token %}
    <table class="table">
      <thead>
        <tr>
          <th>학년</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
              <label for="전체교사">모든 교사에 배정</label> <input id="전체교사" name="profile_ids" type="checkbox" value="teacher">
          </td>
        </tr>
        <tr>
          <td>
              <label for="전체학생">모든 학생에 배정</label> <input id="전체학생" name="profile_ids" type="checkbox" value="all_student">
          </td>
        </tr>
      {% for grade in grade_set %}
        <tr>
          <td>
              <label for="{{grade}}학년">{{grade}}학년</label> <input id="{{grade}}학년" name="profile_ids" type="checkbox" value="{{grade}}">
          </td>
        </tr>
      {% endfor %}
<!-- 추가적인 설문 종류와 설명을 필요에 따라 행을 추가할 수 있습니다 -->
      </tbody>
    </table>
    <input type="submit" class="btn btn-primary" value="과제 배정"></input>
  </form>

{%else%}
<h3>분배 가능 대상자.</h3>
<input type="checkbox" id="selectAll"><label for="selectAll">전체 선택/해제</label>

<form action="#" method="POST" id="myForm">
    {% csrf_token %}
    <table class="table">
      <thead>
        <tr>
          <th>대상</th>
        </tr>
      </thead>
      <tbody>
      {% for profile in filtered_profiles %}
        <tr>
          <td>
              <label for="{{profile.id}}">{{profile}} </label><input id="{{profile.id}}" name="profile_ids" type="checkbox" value="{{profile.id}}">
          </td>
        </tr>
      {% endfor %}
<!-- 추가적인 설문 종류와 설명을 필요에 따라 행을 추가할 수 있습니다 -->
      </tbody>
    </table>
    <input type="submit" class="btn btn-primary" value="과제 배정"></input>
  </form>
{% endif %}


<script>
document.getElementById('myForm').addEventListener('submit', function (event) {
    var confirmation = confirm("제출하시겠습니까?"); // 확인 메시지를 표시합니다.
    if (!confirmation) {
        event.preventDefault(); // 제출을 취소합니다.
    }
});
</script>
<script>
// 선택에 대한 스크립트.
document.getElementById("selectAll").onclick = function() {
  var checkboxes = document.getElementsByName("profile_ids");
  for(var i = 0; i < checkboxes.length; i++) {
    checkboxes[i].checked = this.checked;
  }
}
</script>

{% endblock %}
